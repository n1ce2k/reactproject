{"ast":null,"code":"import _objectSpread from\"C:/Users/n1ce/Desktop/swproject/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _createForOfIteratorHelper from\"C:/Users/n1ce/Desktop/swproject/client/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _regeneratorRuntime from\"C:/Users/n1ce/Desktop/swproject/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/n1ce/Desktop/swproject/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/n1ce/Desktop/swproject/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),characters=_useState2[0],setCharacters=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),filmsData=_useState4[0],setFilmsData=_useState4[1];useEffect(function(){fetchCharacters();},[]);var fetchCharacters=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/swapi');case 3:response=_context.sent;setCharacters(response.data);_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}},_callee,null,[[0,7]]);}));return function fetchCharacters(){return _ref.apply(this,arguments);};}();var fetchFilmData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(url){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(url);case 3:response=_context2.sent;return _context2.abrupt(\"return\",response.data.title);case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0);return _context2.abrupt(\"return\",null);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,7]]);}));return function fetchFilmData(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){var fetchFilms=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var films,_iterator,_step,character,_iterator2,_step2,filmUrl,filmData;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:films={};_iterator=_createForOfIteratorHelper(characters);_context3.prev=2;_iterator.s();case 4:if((_step=_iterator.n()).done){_context3.next=28;break;}character=_step.value;_iterator2=_createForOfIteratorHelper(character.films);_context3.prev=7;_iterator2.s();case 9:if((_step2=_iterator2.n()).done){_context3.next=18;break;}filmUrl=_step2.value;if(filmsData[filmUrl]){_context3.next=16;break;}_context3.next=14;return fetchFilmData(filmUrl);case 14:filmData=_context3.sent;films[filmUrl]=filmData;case 16:_context3.next=9;break;case 18:_context3.next=23;break;case 20:_context3.prev=20;_context3.t0=_context3[\"catch\"](7);_iterator2.e(_context3.t0);case 23:_context3.prev=23;_iterator2.f();return _context3.finish(23);case 26:_context3.next=4;break;case 28:_context3.next=33;break;case 30:_context3.prev=30;_context3.t1=_context3[\"catch\"](2);_iterator.e(_context3.t1);case 33:_context3.prev=33;_iterator.f();return _context3.finish(33);case 36:setFilmsData(function(prevData){return _objectSpread(_objectSpread({},prevData),films);});case 37:case\"end\":return _context3.stop();}},_callee3,null,[[2,30,33,36],[7,20,23,26]]);}));return function fetchFilms(){return _ref3.apply(this,arguments);};}();fetchFilms();},[characters]);var renderCharacterList=function renderCharacterList(){return characters.map(function(character,index){return/*#__PURE__*/_jsxs(\"li\",{children:[character.name,\" - Height: \",character.height,/*#__PURE__*/_jsx(\"ul\",{children:character.films.map(function(filmUrl,index){return/*#__PURE__*/_jsx(\"li\",{children:filmsData[filmUrl]},index);})})]},index);});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Star Wars Characters\"}),/*#__PURE__*/_jsx(\"ul\",{children:renderCharacterList()})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","characters","setCharacters","_useState3","_useState4","filmsData","setFilmsData","fetchCharacters","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","wrap","_callee$","_context","prev","next","get","sent","data","t0","console","error","stop","apply","arguments","fetchFilmData","_ref2","_callee2","url","_callee2$","_context2","abrupt","title","_x","fetchFilms","_ref3","_callee3","films","_iterator","_step","character","_iterator2","_step2","filmUrl","filmData","_callee3$","_context3","_createForOfIteratorHelper","s","n","done","value","e","f","finish","t1","prevData","_objectSpread","renderCharacterList","map","index","children","name","height"],"sources":["C:/Users/n1ce/Desktop/swproject/client/src/App.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\ninterface Character {\r\n    name: string;\r\n    height: string;\r\n    films: string[];\r\n}\r\n\r\ninterface Film {\r\n    title: string;\r\n}\r\n\r\nfunction App() {\r\n    const [characters, setCharacters] = useState<Character[]>([]);\r\n    const [filmsData, setFilmsData] = useState<{ [url: string]: string | null }>({});\r\n\r\n    useEffect(() => {\r\n        fetchCharacters();\r\n    }, []);\r\n\r\n    const fetchCharacters = async () => {\r\n        try {\r\n            const response = await axios.get<Character[]>('/api/swapi');\r\n            setCharacters(response.data);\r\n        } catch (error) {\r\n            console.error(error);\r\n        }\r\n    };\r\n\r\n    const fetchFilmData = async (url: string) => {\r\n        try {\r\n            const response = await axios.get<Film>(url);\r\n            return response.data.title;\r\n        } catch (error) {\r\n            console.error(error);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const fetchFilms = async () => {\r\n            const films: { [url: string]: string | null } = {};\r\n            for (const character of characters) {\r\n                for (const filmUrl of character.films) {\r\n                    if (!filmsData[filmUrl]) {\r\n                        const filmData = await fetchFilmData(filmUrl);\r\n                        films[filmUrl] = filmData;\r\n                    }\r\n                }\r\n            }\r\n            setFilmsData((prevData) => ({ ...prevData, ...films }));\r\n        };\r\n\r\n        fetchFilms();\r\n    }, [characters]);\r\n\r\n    const renderCharacterList = () => {\r\n        return characters.map((character, index) => (\r\n            <li key={index}>\r\n                {character.name} - Height: {character.height}\r\n                <ul>\r\n                    {character.films.map((filmUrl, index) => (\r\n                        <li key={index}>{filmsData[filmUrl]}</li>\r\n                    ))}\r\n                </ul>\r\n            </li>\r\n        ));\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h1>Star Wars Characters</h1>\r\n            <ul>{renderCharacterList()}</ul>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}